{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#what-is-lara-lab-automation","title":"What is LARA Lab Automation?","text":"<p>The LARA Lab automation framework is an open source set of tools and libraries to facilitate laboratory automation. It covers all steps of laboratory automation such as process definition, orchestration, scheduling, device communication and status tracking. The framework is modular and consists of different components that can be used independently or together to create a complete laboratory automation solution.</p> <p>It has been developed by Mark D\u00f6rr and Stefan Maak from the LARA group at the University of Greifswald.</p>"},{"location":"#quickstart","title":"Quickstart","text":"<p>To get started with LARA Lab Automation, please refer to the Quickstart guide which provides step-by-step instructions on setting up the framework and running your first laboratory automation process in a simulated environment.</p>"},{"location":"#target-audience","title":"Target Audience","text":"<p>People who have a robotic arm with several devices they can access via SiLA (or at least python) and look for a framework do describe, orchestrate and schedule workflows on these devices. Some programming skills are necessary.</p>"},{"location":"#architecture-overview","title":"Architecture Overview","text":"<p>The most important components are the following:</p>"},{"location":"#pythonlab","title":"PythonLab","text":"<p>The PythonLab package is a framework to define laboratory processes in python syntax. It converts the process definitions into workflow graphs that can be used by the orchestrator and scheduler.</p>"},{"location":"#orchestrator","title":"Orchestrator","text":"<p>The orchestrator is the component that executes the workflow graphs created by PythonLab. It manages the execution of the processes, allocates resources, and communicates with the devices through the wrappers.</p>"},{"location":"#scheduler","title":"Scheduler","text":"<p>The scheduler is responsible for optimizing the execution of the workflows. It takes into account the availability of resources, the dependencies between tasks, and the overall goals of the laboratory automation.</p>"},{"location":"#platform-status-database","title":"Platform status database","text":"<p>The platform status database keeps track of the status of all devices, labware, and substances in the laboratory. It provides real-time information to the orchestrator and scheduler. It also provides a UI to set the initial status of the lab.</p>"},{"location":"#sila-servers","title":"SiLA servers","text":"<p>Our framework uses SiLA2 as the standard communication protocol between the orchestrator and the devices. SiLA2 is a widely used standard in laboratory automation that defines a common interface for laboratory devices. However, the core framework is designed to be agnostic about the communication protocol. Other protocols can be used by implementing appropriate wrappers.</p>"},{"location":"pythonlab/","title":"pythonLab","text":"<p>pythonLab is a universal, extendable and safe language for laboratory processes.</p> <p>Reproducibility and reliability is in the core of science. Describing lab operations in a precise, easy and standardized form will help to transfer knowledge to every lab around the world. A laboratory process description language is a long desired goal in laboratory process standardization and lab automation. It will enable automated execution of steps and better machine learning and AI predictions, since these process descriptions can be packed as metadata to the data resulting form this process.   </p> <p>Since this process language needs many characteristics of a programming language, like conditions (if ...), loops  (for/while), variables, etc. we do not want to re-invent the wheel twice but rather use the python syntax, which is very popular in science. </p>"},{"location":"pythonlab/#key-desired-features","title":"Key (desired) Features","text":"<ul> <li>easy and simple to learn and write (close to simple English)</li> <li>clear, human readable syntax</li> <li>universal - applicable for most laboratory operations</li> <li>transferable from one lab to another</li> <li>easy mapping between abstract resource representation and actual lab resource</li> <li>Turing-complete, including conditions and loops</li> <li>easy extendible - prepared for the constant development of science</li> <li>close to real laboratory work</li> <li>vendor independent</li> <li>safe to execute</li> <li>converter from other lab description languages to pythonLab easy to implement</li> </ul>"},{"location":"pythonlab/#applications-of-pythonlab","title":"Applications of pythonLab","text":"<ul> <li>general lab processes, common in any natural sciences lab (very broad application)</li> <li>description of lab automation workflows</li> <li>workflows on the lab devices (e.g. HPLC processes - sometimes also called 'methods', plate reader processes etc.)</li> <li>data evaluation workflows</li> </ul>"},{"location":"pythonlab/#architecture-of-pythonlab","title":"Architecture of pythonLab","text":"<p>pythonLab processes are denoted in a python like syntax, but they are not directly executed by a python interpreter. They are rather parsed into a workflow graph, which can be used by a Scheduler to calculate  an optimal schedule (=order of execution). This order of execution might be different from the initial notation. An Orchestrator executes then the schedule and supervises the device communication, e.g. to SiLA servers/devices.</p> Architecture of pythonLab <p>PythonLab specification</p> <p>Very briefly, the generic lab description language should have many features a common programming language has and following the desired Turning-completeness, like:  </p> <ul> <li>variables  (x = value)</li> <li>conditions (if, else, ...)</li> <li>loops      (for ... while ....)</li> <li>functions / methods and subroutines </li> <li>modules</li> <li>namespaces and versions for unique addressing of a process step</li> <li>(at a later stage of language development: object orientation)</li> </ul> <p>!! This is a proposal - we would like to discuss it with a wide range of scientist to find the best common ground </p>"},{"location":"pythonlab/#documentation","title":"Documentation","text":"<p>The pythonLab Documentation can be found in docs</p>"},{"location":"pythonlab/#language-core-extensions","title":"Language Core extensions","text":"<p>extensible Modules for e.g. - liquid handling - cultivation - (bio-chemical) assays - molecular biology - chemical synthesis - data evaluation</p> <p>are in preparation</p>"},{"location":"pythonlab/#examples","title":"Examples","text":"<p>A simple description of liquid transfer step</p> <pre><code># using settings: volume unit: uL, liquid class: water\n# these are set in a settings module\n# specifying resources\nfrom pythonlab.resource import LabwareResource, DeviceResource\nfrom pythonlab.liquid_handling import aspirate, dispense\n\ncont1 = LabwareResource()\ncont2 = LabwareResource()          \nliquid_handler = DeviceResource()\n\n# process steps\nliquid_handler.aspirate(cont1, row=1, col=3, vol=4.0)\nliquid_handler.dispense(cont2, row=2, col=3 , vol=7.2)\n...\n</code></pre> <p>A bit more complex example</p> <pre><code># default units (SI) are specified in the standard unit module\n# additional unit definitions can be added in the code  \n# specifying resources\n\nfrom pythonlab.resource.labware import LabwareResource\nfrom pythonlab.resource.services import MoverServiceResource, IncubationServiceResource\n\ncont1 = LabwareResource()\nmover = MoverServiceResource()\nincubator = IncubationServiceResource()\nstart_pos = cont1.set_start_position(pos=1)\nincubation_duration = 6 # hours\n\n# initialise the process \nincubator.init()\n# process steps\nmover.move(cont1,  start_pos, incubator.nest1)\nincubator.incubate(cont1, incubation_duration, unit=\"h\")\nmover.move(cont1, incubator.nest1, start_pos)\n\n\n...\n</code></pre> <p>And finally a higher level example</p> <pre><code># default units (SI) are specified in the standard unit module\n# additional unit definitions can be added in the code  \n# specifying resources\n\nfrom pythonlab.resource.labware import LabwareResource\nfrom pythonlab.resource.services import MoverServiceResource, DispensionServiceResource, IncubationServiceResource\n\nfrom pythonlab.processes.base import incubate, centrifugate\nfrom pythonlab.bioprocess import inoculate\n\nLabware_set = [LabwareResource(name=f\"growth_plate_{cont}\")\n                           for cont in range(8)]\n\ndispenser = DispensionServiceResource()\nincubator = IncubationServiceResource()\n\ninoculate([dispenser, Labware_set], source=\"starting_culture\")\nincubate([incubator, Labware_set], temp=310.0, shaking=(700,2) )  # temp in K\ncentrifugate([incubator, Labware_set], duration=600, force=4500)\n\n...\n</code></pre>"},{"location":"pythonlab/#why-python","title":"Why python ?","text":"<p>Python is a programming language that is very common in modern scientific laboratories and covers all the desired characteristics we expect of a user-friendly lab process programming language.</p> <p>The syntax is very simple, and intuitive to learn. Syntax validation comes for free: the python interpreter already does it.</p> <p>Standardisation of a minimal set of functionally will be achieved by standardised packages provided by this site (or any publicly available site). Defined namespaces and versioning allow unique addressing of a process step. </p>"},{"location":"pythonlab/#implementation","title":"Implementation","text":"<p>As a proof-of-concept we are planning to provide a pypy-sandbox implementation in the future. pypy-sandbox offerers a safe execution environment to execute insecure code.  A new version is currently developed to by the pypy community. Alternatively WASM will be a possible safe execution environment.</p>"},{"location":"pythonlab/#related-projects","title":"Related projects","text":"<p>Here is an incomplete list of related OpenSource projects - please let us know, if we missed a relevant project. </p>"},{"location":"pythonlab/#autoprotocoll","title":"Autoprotocoll","text":"<ul> <li>Syntax: JSON based </li> <li>(-) not Turing complete</li> <li>(-) hard to write and read by humans</li> </ul>"},{"location":"pythonlab/#labop","title":"LabOP","text":"<ul> <li>Syntax: RDF / python</li> <li>(-) not Turing complete (?)</li> <li>(-) hard to write and read by humans</li> </ul>"},{"location":"pythonlab/#roboliq","title":"RoboLiq","text":"<ul> <li>Syntax: yaml / Javascript</li> <li>(-) not Turing complete</li> <li>(-) hard to write and read by humans</li> <li>(-) design not clearly specified</li> </ul>"},{"location":"pythonlab/#repository-maintainer","title":"Repository Maintainer:","text":"<ul> <li>mark doerr (mark.doerr@uni-greifswald.de)</li> </ul>"},{"location":"pythonlab/#documentation_1","title":"Documentation","text":"<p>The Documentation can be found here: opensourcelab.gitlab.io/pythonLab or pythonLab.gitlab.io</p>"},{"location":"pythonlab/#credits","title":"Credits","text":"<p>This package was created with Cookiecutter and the <code>opensource/templates/cookiecutter-pypackage</code> project template.</p> <p>Cookiecutter opensource/templates/cookiecutter-pypackage </p>"},{"location":"quickstart/","title":"Quickstart","text":""},{"location":"quickstart/#simulated-example","title":"Simulated example","text":"<p>The fastest way to try out the LARA suite is by running the simulated example provided by the  adaptation template.</p> <p>There are two ways to run the example: using Docker or running it directly with Python.</p>"},{"location":"quickstart/#cloning-the-repository","title":"Cloning the repository","text":"<p>Whether you choose to run the example with Docker or Python, you first need to clone the repository:</p> <pre><code>git clone https://gitlab.com/OpenLabAutomation/adaption-template.git\ncd adaption-template\n</code></pre>"},{"location":"quickstart/#running-with-docker","title":"Running with Docker","text":"<p>Running the example with docker is straightforward, but it does require that you have the  Docker Desktop or Docker Engine installed on your machine.</p> <p>To run the example with Docker, go to the root directory of the cloned repository and run the following command:</p> <pre><code>docker-compose up\n</code></pre>"},{"location":"quickstart/#running-with-python","title":"Running with Python","text":"<p>First, use your favorite tool to create and activate a new Python environment with Python 3.11 or higher.  For example with pyvenv on linux: <pre><code>   Python -m venv labautomation\n   source labautomation/bin/activate\n</code></pre> 3. Install all necessary packages:    - to install all mandatory dependencies, run: <pre><code>    pip install -r requirements.txt -e .\n</code></pre>    - to also install the example sila servers (necessary for the demo examples to run) add: <pre><code>    pip install -r requirements_servers.txt\n</code></pre>    - to also install requirements for stronger scheduling algorithms, run: <pre><code>    pip install -r requirements_mip_cp.txt\n</code></pre> 4. Install and set up the database</p> <p>Installation: Run <pre><code>    git clone https://gitlab.com/OpenLabAutomation/lab-automation-packages/platform_status_db.git\n    pip install -e platform_status_db/.\n</code></pre> Setup: Run and follow the instructions to create an admin login to Django. On Windows you will have execute the steps manually.</p> <pre><code>    bash scripts/init_db.sh\n</code></pre> <p>Fill the database: Run <pre><code>    Python scripts/add_lab_setup_to_db.py\n</code></pre> This adds the lab setup as described in platform_config.yml to the database. Rerun this script after you customized the config file.</p>"},{"location":"quickstart/#startup","title":"Startup","text":"<p>Call from different console tabs</p> <p>Option 1: In gnome terminal you could start all four of the following services in different tabs by running</p> <pre><code>bash scripts/run_services.sh\n</code></pre> <p>Option 2: Otherwise use individual commands (remember activating the virtual environment):</p> <p>To start the scheduler: <pre><code>labscheduler\n</code></pre> To start the django database view (optional). If you changed directory, adapt the path: <pre><code>run_db_server\n</code></pre> To start the orchestrator:</p> <pre><code>laborchestrator\n</code></pre> <p>To start demo servers: <pre><code>start_sila_servers\n</code></pre></p>"},{"location":"quickstart/#usage","title":"Usage","text":"<p>You can access the GUI for different components: - database of present labware at http://127.0.0.1:8000/job_logs/present_labware/ - orchestrator at http://127.0.0.1:8050/ - the human interaction sila server: http://127.0.0.1:8054/ - view and manual control of the robotic arm: http://127.0.0.1:8055/</p> <p>To see how the example servers are controlled from the orchestrator, go to the the orchestrator GUI and load and start one of the example processes. - GreeterTest: Sends a Hello-World to the sila2-example-server - MoverTest: You can view the robots movements in the robot GUI - HumanTest: you will have to finish the tasks in the human interaction GUI - InterestingExample: A more complex workflow with runtime decisions based on human interaction</p> Orchestrator UI"},{"location":"quickstart/#loading-and-running-a-process","title":"Loading and running a process","text":"<ol> <li>Go to the left dropdown menu and choose a process to load.</li> <li>Click on \"Load Process\"</li> <li>The corresponding workflow graph should appear below. You can zoom in/out and move it. Clicking on nodes dumps its     data structure as string into the textfield above (you might have to move the graph a bit down, so it gets visible).</li> <li>Your loaded process should appear in the second dropdown menu. Choose it.</li> <li>Click on \"Add Containers to DB\". This creates entries for all labware in that process in the positions described in    the process in case there isn't already labware. Existing labware is considered to belong to that process. You can     see all present labware in the database view which updates automatically.</li> <li>(Optional) Click on \"Schedule Process\" to get a predicted schedule. It will appear the Gantt chart.</li> <li>Click on \"Start Process\". This will update the schedule and will execute steps accordingly.    You can monitor the progress in the orchestrator GUI and the labware movements in the database view.</li> </ol>"},{"location":"quickstart/#things-to-observe-during-the-process","title":"Things to observe during the process","text":"<p>While the process runs you can observe different features of our framework.</p> <ol> <li>Live updates of the process in the orchestrator:</li> <li>The Gantt chart has a moving bar of where in time you currently are</li> <li>Process step nodes in the graph turn yellow while they are being executed and green when they are finished. Pink means there was an error.</li> <li>If a barcode for any labware equipment is read or assigned, it is shown in the Gantt chart</li> <li>Live updates of the database</li> <li>In the database view (which auto-reloads to reflect modifications), all labware is listed with its barcode and current position.</li> <li>The admin view of the database allows you to see the results and the labware involved, as well as to change the duration and starting time of each step. The credentials are the ones you chose during the installation process for the superuser.</li> </ol>"},{"location":"wrappers/","title":"Wrappers","text":"<p>Wrappers are the interface between the lab orchestrator and the actual devices. They translate the high-level commands defined in ?? to specific SILA commands.</p>"},{"location":"wrappers/#the-wrapper-structure","title":"The wrapper structure","text":"<pre><code>class MyWrapper(DeviceInterface):\n    @staticmethod\n    def get_SiLA_handler(\n        step: ProcessStep,\n        cont: ContainerInfo,\n        sila_client: ShakerClient,\n        **kwargs,\n    ) -&gt; Observable:\n        ...\n</code></pre>"},{"location":"wrappers/#processstep","title":"ProcessStep","text":"<p>Describes the step that should be executed.</p> <p>hoi bla</p>"},{"location":"wrappers/#containerinfo","title":"ContainerInfo","text":"<p>Describes the container that is handled</p>"},{"location":"wrappers/#sila-client","title":"Sila client","text":""}]}